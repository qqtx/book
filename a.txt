加载网页("http://www.balzac.cc/app")




import "android.graphics.drawable.ColorDrawable" 


      function 动画测试()
        import "android.view.animation.*"--导入

        lay=
        {
          LinearLayout,
          orientation="vertical",
          layout_height="fill";
          layout_width="fill";
          gravity="center";
          id="dc",
          {
            LinearLayout,
            orientation="vertical",
            layout_height="match_parent";
            layout_width="90%w";
            id="a";

            { 
              LinearLayout,
              orientation="vertical", 
              -- gravity="center";
              {
                --火箭
                LinearLayout,
                layout_height="18%h";
                layout_width="80%w";
                layout_marginBottom='1dp';
                layout_gravity="center";
                background="#00000000",
                {
                  ImageView;
                  src="http://bookapp.gz01.bdysite.com/tj/qd/xhj2.png",
                  id="xhj";
                };
              },
            },


            {
              CardView;--卡片控件
              layout_marginBottom='9dp';--卡片边距
              layout_gravity='center';--重力属性
              elevation='0dp';--阴影属性
              layout_width='76%w';--卡片宽度
              CardBackgroundColor='#FFFFFFFF';--卡片背景颜色
              layout_height='60%h';--卡片高度
              radius='12dp';--卡片圆角

              {
                LinearLayout;
                orientation='vertical';--重力属性
                layout_width='76%w';--布局宽度
                layout_height='77dp';--布局高度
                background='http://bookapp.gz01.bdysite.com/tj/qd/ub.png';--布局背景颜色(或者图片路径)]]

                {
                  TextView;--文本控件
                  layout_width='76%w';--文本宽度
                  layout_height='45dp';--文本高度
                  gravity='center';--重力属性
                  textColor='#FFFFFFFF';--文字颜色
                  text='发现新版本';--显示的文字
                  textSize='24sp';--文字大小
                  layout_marginTop="15dp";
                };
                {
                  TextView;
                  textSize="15sp";
                  layout_gravity='center';--重力属性
                  textColor="#FF888888";
                  text="版本：v_2.7.2",
                };
              };



              {
                LinearLayout;
                orientation='vertical';--重力属性
                layout_width='76%w';--布局宽度
                layout_height='120%h';--布局高度
                background='#FFFFFFFF';--布局背景颜色(或者图片路径)
                layout_marginTop="110dp";

                {
                  ScrollView,--纵向滚动
                  layout_width='68%w';--宽
                  layout_height='59%w';--高 活动窗口大小 按钮在空白中间高度 
                  layout_marginTop="0dp";
                  layout_marginLeft="4%w";
                  {
                    TextView;--纽扣控件
                    text="BOOK 升级公告\n请更新到最新版BOOK，旧版不再提供服务。\n注：使用2.7版本以下的用户请不要再反馈阅读问题了，因为这些问题再最新版本上已经修复完成。官方下载地址：www.balzac.cc/app";
                    textSize='17sp';--文字大小
                    textColor='#F3525252';--文字颜色
                    backgroundColor='#FFFFFFFF';--纽扣背景颜色
                    layout_width='68%w';--纽扣宽度
                    layout_height='170dp';--纽扣高度  
                    gravity="center|left";
                  };
                }; --滚动结束



                {
                  Button,
                  layout_width="40%w",
                  layout_height="7%h",
                  layout_marginTop="1%h";
                  layout_gravity="center";
                  text="立 即 升 级",
                  textSize="18sp";
                  textColor="#FFffff";
                  id="gx",
                },

              };
            }; --卡片线性布局结束
          };--卡片布局结束

          {
            ImageView;
            src="http://bookapp.gz01.bdysite.com/tj/qd/qx.png",
            layout_gravity="center";
            layout_marginTop="3%h";
            ColorFilter=0xFFffffff,
            id="qx";
          };
        };




        dialog= AlertDialog.Builder(this)
        import "android.text.SpannableString"
        import "android.text.style.ForegroundColorSpan"
        import "android.text.Spannable"
        dialog1=dialog.show()
        --点击外部不消失
        dialog1.setCanceledOnTouchOutside(false);
        --点击返回键无响应
        dialog1.setCancelable(false);

        dialog1.getWindow().setContentView(loadlayout(lay));

        import "android.graphics.drawable.ColorDrawable"
        dialog1.getWindow().setBackgroundDrawable(ColorDrawable(0x00000000));




        function 揭露动画(时间)

          t=Ticker()
          t.Period=0
          t.start()
          t.onTick=function()
            t.stop()
            animator = ViewAnimationUtils.createCircularReveal(dc,a.getWidth()/2.5,0,0,Math.hypot(a.getWidth(),a.getHeight()));
            animator.setInterpolator(AccelerateInterpolator());
            animator.setDuration(时间);
            animator.start();

          end


  
        end
        揭露动画(1000)
      end
      动画测试()





      import "android.graphics.drawable.ColorDrawable"
      dialog1.getWindow().setBackgroundDrawable(ColorDrawable(0x00000000));

      function CircleButton(view,radiu,InsideColor,半圆)
        import "android.graphics.drawable.GradientDrawable"
        drawable = GradientDrawable()
        drawable.setShape(GradientDrawable.RECTANGLE)
        drawable.setColor(InsideColor)
        drawable.setCornerRadii({半圆,radiu,半圆,radiu,radiu,radiu,radiu,radiu});
        view.setBackgroundDrawable(drawable)
      end
      CircleButton(gx,360,0xFF74C96E,360)



      gx.onClick=function()
        dialog1.dismiss()
        import "android.content.Intent"
        import "android.net.Uri"
        url="https://www.lanzous.com/b477475/"
        viewIntent = Intent("android.intent.action.VIEW",Uri.parse(url))
        activity.startActivity(viewIntent)

      end

      qx.onClick=function()
        dialog1.dismiss()
      end



停止加载()

if
(网页链接:find("http://xiangkeyear.gz01.bdysite.com/x/happy/nill.html")) then
  网页后退()
 进入子页面("工具")
end
if
(网页链接:find("http://xiangkeyear.gz01.bdysite.com/x/happy/nil.html")) then
    import "android.content.Intent"
        import "android.net.Uri"
        url="https://lianxin.quarkblockchain.cn/promoter-register?code=YVdWxy"
        viewIntent = Intent("android.intent.action.VIEW",Uri.parse(url))
        activity.startActivity(viewIntent)
        网页后退()
end


if
(网页链接:find("http://xiangkeyear.gz01.bdysite.com/x/happy/nilll.html")) then
联系QQ(1243469642)
网页后退()
end



import "android.text.format.Formatter"
function Too_young()
  webView.setDownloadListener{onDownloadStart=function(url,userAgent,contentDisposition,mimetype,contentLength)
    文件名=URLUtil.guessFileName(url, contentDisposition, mimeType);
    下载链接=url
   文件类型=mimetype
    文件大小=Formatter.formatFileSize(this, contentLength)
    下载()
    function adm(dlurl)
      this.startActivity(Intent().setAction("android.intent.action.SEND").setType("text/*").putExtra("android.intent.extra.TEXT", dlurl).setClassName("com.dv.adm.pay", "com.dv.adm.pay.AEditor"));
    end
  end}
end

Too_young()--初始化
function 下载()--以下代码可自由编辑，每当监听到下载任务时会运行以下代码。可用的值：url,userAgent,contentDisposition,mimetype,contentLength,文件名,文件类型,文件大小,下载链接
  对话框()
  .设置标题("BOOK电子书下载")
  .设置消息("文件类型：epub(通用电子书格式)".."\n文件大小："..文件大小.."\n下载路径:根目录/BOOK电子书下载")
  .设置积极按钮("下载",function()
    downloadManager=activity.getSystemService(Context.DOWNLOAD_SERVICE);--调用系统下载器下载
    url=Uri.parse(下载链接);
    request=DownloadManager.Request(url);
    request.setAllowedNetworkTypes(DownloadManager.Request.NETWORK_MOBILE|DownloadManager.Request.NETWORK_WIFI);
    request.setDestinationInExternalPublicDir("BOOK电子书下载",文件名);
    request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
    downloadManager.enqueue(request);
  end)
  .设置消极按钮("取消")
--  .设置中立按钮("ADM下载",function()
   -- adm(下载链接)
--  end)
  .显示()
end
